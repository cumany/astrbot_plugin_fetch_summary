# URL 摘要获取插件 (fetch_url_summarizer)

## 插件介绍

`fetch_url_summarizer` 是一款基于 AstrBot 平台的插件，能够自动监听群聊消息中的 URL 链接，并自动获取链接内容的摘要信息，支持自动翻译功能（默认开启），帮助用户快速了解网页内容核心。插件内置了对 articlesummarizer.com 上游接口的调用逻辑，无需额外部署 Docker 服务即可使用。

### 功能特点
- 自动识别群聊消息中的 URL 链接
- 调用摘要接口获取网页内容摘要
- 自动检测摘要语言，英文摘要将自动翻译为中文
- 支持配置黑名单群组和关键词过滤
- 支持通过触发关键词控制摘要获取行为

## 安装方法

1. 确保已安装 AstrBot 平台环境
2. 将插件代码放入 AstrBot 插件目录
3. 重启 AstrBot 服务，插件将自动加载

## 配置说明

插件支持通过配置文件进行个性化设置，主要配置项如下：

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| `timeout` | 接口请求超时时间（秒） | 30 |
| `max_retries` | 接口请求最大重试次数 | 3 |
| `enable_translation` | 是否启用自动翻译 | True |
| `provider` | 翻译使用的 LLM 提供商 ID（留空则使用默认提供商） | "" |
| `blacklist_groups` | 黑名单群组 ID 列表（这些群组的消息不会被处理） | [] |
| `blacklist_keywords` | URL 黑名单关键词（包含这些关键词的 URL 会被跳过） | [] |
| `trigger_keywords` | 触发关键词列表（消息中包含任意关键词才会处理，空列表则全部处理） | [] |

## 使用方法

1. 插件启用后会自动监听所有群聊消息（黑名单群组除外）
2. 当消息中包含 URL 链接时，插件会自动处理：
   - 提取有效的 URL 链接
   - 过滤掉包含黑名单关键词的 URL
   - 调用摘要接口获取内容摘要
   - 自动翻译英文摘要为中文
   - 在群聊中回复包含摘要的消息

### 示例

发送包含 URL 的消息：
```
看看这篇文章 https://example.com/article
```

插件会自动回复：
```
https://example.com/article
📝内容摘要：
这是文章的核心内容摘要...
```

## 注意事项

1. 插件会自动跳过包含"reply"和"内容摘要："的消息，避免循环处理
2. 对于无效的 URL 或无法获取摘要的链接，插件会静默处理（仅在日志中记录）
3. 当摘要接口请求失败并达到最大重试次数时，将不会返回摘要信息
4. 翻译功能依赖于可用的 LLM 提供商，若未配置则会跳过翻译

## 版本信息

- 版本：1.0.0
- 作者：Cuman
- 项目地址：https://github.com/cumany/astrbot_plugin_fetch_url_summarizer
